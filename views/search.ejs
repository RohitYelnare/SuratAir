<%- include('partials/header') %>
<link rel="stylesheet" href="css/flights.css">
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

    <style>
    .showbtn:hover {
        color: HSL(var(--button-hover-text-color, 0, 0%, 100%));
        background-color: darkorange;
        opacity: 0.9;
      }</style>
    <title>Book Flight</title>
<script>
// function datepick()
// {
//     var todaysDate = new Date(); 
//     var year = todaysDate.getFullYear();                        // YYYY
//     var month = ("0" + (todaysDate.getMonth() + 1)).slice(-2);  // MM
//     var day = ("0" + todaysDate.getDate()).slice(-2);           // DD
//     var minDate = (year +"-"+ month +"-"+ day);                 // Results in "YYYY-MM-DD" for today's date 

//     document.getElementsByName("date")[0].setAttribute('min', minDate);    //min accepts only ISO form
     

// }

function updateSelect(changedSelect, selectId) {
   var otherSelect = document.getElementById(selectId);
   for (var i = 0; i < otherSelect.options.length; ++i) {
       otherSelect.options[i].disabled = false;
   }
   if (changedSelect.selectedIndex == 0) {
      return;
   }
   otherSelect.options[changedSelect.selectedIndex].disabled = true;
}

</script>
    
    
</head>
<body>
    <%- include('partials/navbar') %>
    <section class="bcimage banner" id="top">
        <div class="container">
            <div class="row">
                <div class="col-md-5 col-md-offset-1">
                    <section id="first-tab-group" class="tabgroup">
                        <div id="tab1">
                            <div class="submit-form"  style="border-radius: 1.5rem;">
                                <h4>Check availability for <em>flights</em>:</h4>
                                <form id="form-submit" action="" method="POST">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <fieldset>
                                                <label for="dept">From:</label>
                                                <select required name='dept' id="place1" onchange="updateSelect(this,'place2')" >
                                                    <option value="">Select a location...</option>
                                                    <% for (var i = 0; i < destinationsfound.length; i++) { %>
                                                        
                                                        <option>
                                                           <%= destinationsfound[i].city %>
                                                        </option>
                                                        <% } %>
                                                </select>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-6">
                                            <fieldset>
                                                <label for="arr">To:</label>
                                                <select required name='arr' id="place2" onchange="updateSelect(this,'place1')" >
                                                    <option value="">Select a location...</option>
                                                    <% for (var i = 0; i < destinationsfound.length; i++) { %>
                                                        <option>
                                                           <%= destinationsfound[i].city %>
                                                        </option>
                                                        <% } %>
                                                </select>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-6">
                                            <fieldset>
                                                <label for="departure">Departure date:</label>
                                                <input name="date" type="date" class="form-control date" id="departure" placeholder="Select date..." required>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-6">
                                            <fieldset>
                                                <label for="return">Number of passengers: </label>
                                                <input name="pcount" type="number" class="form-control date" id="return" placeholder="Number of passengers" min="1" required>
                                            </fieldset>
                                        </div>
                                        <div class="col-md-5">
                                            <fieldset>
                                                <button type="submit" id="form-submit" class="showbtn" style="border-radius: 0.8rem;
                                                padding: 0.75em 2em;
                                                appearance: none;
                                                background-color: HSL(var(--button-background-color, var(--color-orange)));
                                                color: HSL(var(--button-text-color, 0, 0%, 100%));
                                                font-size: 1.5rem;
                                                border: none;
                                                cursor: pointer;
                                                transition: background-color 0.7s var(--ease-out-quart), color 0.7s var(--ease-out-quart);">Show flights</button>
                                            </fieldset>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </section>
  <script>
         datepick();
    </script>
<%- include('partials/footer') %>
